import{o as r,b as h,r as g,d as v,a as b}from"./db-a6684dc1.js";import{t as M}from"./todo-97af5082.js";import{_ as x,m as D,r as _,o as d,c as n,b as e,f as a,i as T,v as w,F as L,j as y,e as k,d as u,t as C}from"./index-020b6f25.js";import{T as I,D as V}from"./DeleteTodoModal-f2afb80e.js";import"./modalMixin-72351387.js";const j={data(){return{uid:"",todoLists:{},todoId:"",todoDeleteId:"",searchTitle:"",filterLists:[]}},components:{TodoModal:I,DeleteTodoModal:V},methods:{...D(M,["toastMessage"]),checkLogin(){r(h,t=>{t?this.uid=t.uid:(this.uid=null,this.$router.push("/login"),this.toastMessage("請登入","error"))})},openModal(t){this.todoId=t},openDeleteModal(t){this.todoDeleteId=t},getTodoLists(){r(h,t=>{if(t){this.uid=t.uid;const i=g(v,`todoLists/${this.uid}`);b(i,c=>{this.todoLists=c.val()})}else this.uid=null})}},mounted(){this.checkLogin(),this.getTodoLists()},computed:{searchLists(){return Object.entries(this.todoLists).filter(t=>t[1].title.match(this.searchTitle))}}},B={class:"my-7"},A={class:"container mb-5"},H=e("h2",{class:"mb-5 d-flex align-items-center justify-content-center"}," 清單 ",-1),N={class:"row row-cols-lg-2 row-cols-1 gy-4"},S={class:"col menu"},F={class:"card bg-white text-white border-0 h-100"},G=e("img",{src:"https://images.unsplash.com/photo-1586282023617-b844c180eb51?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",class:"h-100 card-img",alt:"...",style:{"object-fit":"cover"}},null,-1),q={class:"card-img-overlay d-flex"},E={class:"card-title my-auto ms-auto text-green d-flex align-items-center"},O=e("span",{class:"fw-bold"},"新增清單",-1),R=e("span",{class:"fs-5"},"+",-1),U=[R],W=e("p",{class:"card-text mt-auto bg-green"},"簡短的清單或待辦事項",-1),Y={class:"col"},z={class:"card"},J=e("div",{class:"card-header"}," 清單列表 ",-1),K={class:"list-group list-group-flush"},P=["onClick"],Q=["onClick"],X=e("i",{class:"bi bi-x-lg"},null,-1),Z=[X];function $(t,i,c,ee,s,l){const m=_("TodoModal"),p=_("DeleteTodoModal");return d(),n("div",null,[e("div",B,[e("section",A,[H,e("div",N,[e("div",S,[e("div",F,[G,e("div",q,[e("h3",E,[O,e("a",{href:"#",onClick:i[0]||(i[0]=a(o=>l.openModal("new"),["prevent"])),class:"stretched-link btn btn-outline-green ms-3 fw-bold"},U)]),W])])]),e("div",Y,[T(e("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":i[1]||(i[1]=o=>s.searchTitle=o),placeholder:"搜尋清單"},null,512),[[w,s.searchTitle]]),e("div",z,[J,e("ul",K,[s.todoLists?(d(!0),n(L,{key:0},y(l.searchLists,o=>(d(),n("li",{key:o[0],class:"list-group-item d-flex align-items-center",style:{cursor:"pointer"}},[e("span",{onClick:a(f=>l.openModal(o[0]),["prevent"]),class:"w-100"},C(o[1].title),9,P),e("a",{href:"#",class:"btn ms-auto",onClick:a(f=>l.openDeleteModal(o[0]),["prevent"])},Z,8,Q)]))),128)):k("",!0)])])])])])]),u(m,{ref:"todoModal",uid:s.uid,id:s.todoId,"open-modal":l.openModal},null,8,["uid","id","open-modal"]),u(p,{uid:s.uid,id:s.todoDeleteId,"open-delete-modal":l.openDeleteModal},null,8,["uid","id","open-delete-modal"])])}const de=x(j,[["render",$]]);export{de as default};
