import{o as r,b as h,r as g,d as v,a as b}from"./db-a6684dc1.js";import{t as M}from"./todo-d3904c82.js";import{_ as x,m as D,r as _,o as l,c as a,b as e,f as n,i as T,v as w,F as L,j as y,e as k,d as u,t as C}from"./index-f54687d3.js";import{T as I,D as V}from"./DeleteTodoModal-1f90af39.js";import"./modalMixin-4ae86687.js";const j={data(){return{uid:"",todoLists:{},todoId:"",todoDeleteId:"",searchTitle:"",filterLists:[]}},components:{TodoModal:I,DeleteTodoModal:V},methods:{...D(M,["toastMessage"]),checkLogin(){r(h,t=>{t?this.uid=t.uid:(this.uid=null,this.$router.push("/login"),this.toastMessage("請登入","error"))})},openModal(t){this.todoId=t},openDeleteModal(t){this.todoDeleteId=t},getTodoLists(){r(h,t=>{if(t){this.uid=t.uid;const i=g(v,`todoLists/${this.uid}`);b(i,c=>{this.todoLists=c.val()})}else this.uid=null})}},mounted(){this.checkLogin(),this.getTodoLists()},computed:{searchLists(){return Object.entries(this.todoLists).filter(t=>t[1].title.match(this.searchTitle))}}},B={"data-aos":"fade-up","data-aos-duration":"1000"},A={class:"my-7"},H={class:"container mb-5"},N=e("h2",{class:"mb-5 d-flex align-items-center justify-content-center"}," 清單 ",-1),S={class:"row row-cols-lg-2 row-cols-1 gy-4"},F={class:"col menu"},G={class:"card bg-white text-white border-0 h-100"},q=e("img",{src:"https://images.unsplash.com/photo-1586282023617-b844c180eb51?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",class:"h-100 card-img",alt:"...",style:{"object-fit":"cover"}},null,-1),E={class:"card-img-overlay d-flex"},O={class:"card-title my-auto ms-auto text-green d-flex align-items-center"},R=e("span",{class:"fw-bold"},"新增清單",-1),U=e("span",{class:"fs-5"},"+",-1),W=[U],Y=e("p",{class:"card-text mt-auto bg-green"},"簡短的清單或待辦事項",-1),z={class:"col"},J={class:"card"},K=e("div",{class:"card-header"}," 清單列表 ",-1),P={class:"list-group list-group-flush"},Q=["onClick"],X=["onClick"],Z=e("i",{class:"bi bi-x-lg"},null,-1),$=[Z];function ee(t,i,c,te,s,d){const m=_("TodoModal"),p=_("DeleteTodoModal");return l(),a("div",B,[e("div",A,[e("section",H,[N,e("div",S,[e("div",F,[e("div",G,[q,e("div",E,[e("h3",O,[R,e("a",{href:"#",onClick:i[0]||(i[0]=n(o=>d.openModal("new"),["prevent"])),class:"stretched-link btn btn-outline-green ms-3 fw-bold"},W)]),Y])])]),e("div",z,[T(e("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":i[1]||(i[1]=o=>s.searchTitle=o),placeholder:"搜尋清單"},null,512),[[w,s.searchTitle]]),e("div",J,[K,e("ul",P,[s.todoLists?(l(!0),a(L,{key:0},y(d.searchLists,o=>(l(),a("li",{key:o[0],class:"list-group-item d-flex align-items-center",style:{cursor:"pointer"}},[e("span",{onClick:n(f=>d.openModal(o[0]),["prevent"]),class:"w-100"},C(o[1].title),9,Q),e("a",{href:"#",class:"btn ms-auto",onClick:n(f=>d.openDeleteModal(o[0]),["prevent"])},$,8,X)]))),128)):k("",!0)])])])])])]),u(m,{ref:"todoModal",uid:s.uid,id:s.todoId,"open-modal":d.openModal},null,8,["uid","id","open-modal"]),u(p,{uid:s.uid,id:s.todoDeleteId,"open-delete-modal":d.openDeleteModal},null,8,["uid","id","open-delete-modal"])])}const ae=x(j,[["render",ee]]);export{ae as default};
